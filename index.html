<!doctype html>
<html>
<head>
<title>Oscillating engine simulator</title>
<style type="text/css">
.changed { background:#fdd }
input {
    width: 100px;
}
label {
    display: inline-block;
    width: 250px;
    text-align: right;
}
</style>
</head>
<body>

<h1>Oscillating engine simulator</h1>

<div style="float:left;">
<div id="canvas"></div>

<div id="status">
    <input type="range" min="1" max="100" value="10" id="timefactor">
    <span id="timefactorlabel">1.00</span>x<br>
    <button id="kick">Kick</button> <button id="pauseresume">Pause</button><br>
    <span id="rpm">0</span> rpm
    <br>
    <span id="pressure">0</span> kPa
    <br>
    <span id="torque">0</span> Nm @ <span id="meanrpm">0</span> rpm = <span id="power">0</span> W = <span id="horsepower">0</span> hp
    <br>
    <span id="efficiency">0</span> % efficiency
    <br>
    Displacement: <span id="cc">0</span> cc
</div>
</div>

<div id="params" style="float:left">
    <label for="preset">Preset:</label> <select id="preset">
        <option value="wigwag">Wig-Wag</option>
        <option value="stevesworkshop">Steve's Workshop</option>
        <option value="wobler">Wobler</option>
    </select><br>
    <br>

    <label for="bore">Bore: </label> <input type="text" id="bore"> mm<br>
    <label for="stroke">Stroke:</label> <input type="text" id="stroke"> mm<br>
    <label for="deadspace">Gap above piston at TDC:</label> <input type="text" id="deadspace"> mm<br>
    <label for="rodlength">Piston+rod length: </label> <input type="text" id="rodlength"> mm <small>crank pin axis to top of piston</small><br>
    <label for="pivotseparation">Pivot separation: </label> <input type="text" id="pivotseparation"> mm<br>
    <label for="portthrow">Port swing radius:</label> <input type="text" id="portthrow"> mm<br>
    <label for="inletportdiameter">Inlet port diameter: </label> <input type="text" id="inletportdiameter"> mm<br>
    <label for="exhaustportdiameter">Exhaust port diameter: </label> <input type="text" id="exhaustportdiameter"> mm<br>
    <label for="cylinderportdiameter">Cylinder port diameter: </label> <input type="text" id="cylinderportdiameter"> mm<br>
    <label for="inletportangle">Inlet port angle: </label> <input type="text" id="inletportangle"> &deg;<br>
    <label for="exhaustportangle">Exhaust port angle: </label> <input type="text" id="exhaustportangle"> &deg;<br>
    <label for="flywheeldiameter">Flywheel diameter: </label> <input type="text" id="flywheeldiameter"> mm<br>
    <label for="flywheelmomentofinertia">Flywheel moment of inertia: </label> <input type="text" id="flywheelmomentofinertia"> kg m<sup>2</sup> <small><a href="flywheel.html" target="_blank">[calculator]</a></small><br>

    <br>

    <label for="atmosphericpressure">Atmospheric pressure: </label> <input type="text" id="atmosphericpressure" value="101.325"> kPa<br>
    <label for="inletpressure">Inlet pressure: </label> <input type="text" id="inletpressure" value="50"> kPa <small>above atmospheric</small><br>
    <label for="frictiontorque">Static load: </label> <input type="text" id="frictiontorque" value="0.001"> Nm<br>
    <label for="loadperrpm">Speed-dependent load: </label> <input type="text" id="loadperrpm" value="0.00003"> Nm / rpm<br>
    <label for="airflowmethod">Air flow method: </label> <select id="airflowmethod">
        <option value="tlv">TLV</option>
        <option value="trident1">Trident 1</option>
        <option value="trident2">Trident 2</option>
        <option value="bernoulli">Bernoulli's equation</option>
        <option value="linear">Linear</option>
    </select><br>

    <br>
    <label for="update"></label><button id="update">Apply</button> <button id="reset">Reset</button> <span id="pendingchanges"><i>Pending changes, click "Apply"</i></span>
</div>

<div style="clear:both"></div>

<hr>

<i>By <a href="https://incoherency.co.uk/">James Stanley</a>.</i>

<script src="p5.min.js"></script>
<script src="engine.js"></script>
<script src="pv-diagram.js"></script>
<script src="timing-diagram.js"></script>
<script src="main.js"></script>

</body>
</html>
